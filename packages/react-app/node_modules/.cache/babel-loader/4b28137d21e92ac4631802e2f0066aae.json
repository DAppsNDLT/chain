{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Wallet = void 0;\n\nconst methods_1 = require(\"../communication/methods\");\n\nconst permissions_1 = require(\"../types/permissions\");\n\nclass Wallet {\n  constructor(communicator) {\n    this.communicator = communicator;\n  }\n\n  async getPermissions() {\n    const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n    return response.data;\n  }\n\n  async requestPermissions(permissions) {\n    if (!this.isPermissionRequestValid(permissions)) {\n      throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n\n    try {\n      const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n      return response.data;\n    } catch (_a) {\n      throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n  }\n\n  isPermissionRequestValid(permissions) {\n    return permissions.every(pr => {\n      if (typeof pr === 'object') {\n        return Object.keys(pr).every(method => {\n          if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n            return true;\n          }\n\n          return false;\n        });\n      }\n\n      return false;\n    });\n  }\n\n}\n\nexports.Wallet = Wallet;","map":{"version":3,"sources":["../../../src/wallet/index.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,SAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AAEA,MAAA,aAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;AAEA,MAAM,MAAN,CAAY;AAGV,EAAA,WAAA,CAAY,YAAZ,EAAsC;AACpC,SAAK,YAAL,GAAoB,YAApB;AACD;;AAEmB,QAAd,cAAc,GAAA;AAClB,UAAM,QAAQ,GAAG,MAAM,KAAK,YAAL,CAAkB,IAAlB,CACrB,SAAA,CAAA,OAAA,CAAQ,qBADa,EAErB,SAFqB,CAAvB;AAKA,WAAO,QAAQ,CAAC,IAAhB;AACD;;AAEuB,QAAlB,kBAAkB,CAAC,WAAD,EAAiC;AACvD,QAAI,CAAC,KAAK,wBAAL,CAA8B,WAA9B,CAAL,EAAiD;AAC/C,YAAM,IAAI,aAAA,CAAA,gBAAJ,CAAqB,gCAArB,EAAuD,aAAA,CAAA,4BAAvD,CAAN;AACD;;AAED,QAAI;AACF,YAAM,QAAQ,GAAG,MAAM,KAAK,YAAL,CAAkB,IAAlB,CAIrB,SAAA,CAAA,OAAA,CAAQ,yBAJa,EAIc,WAJd,CAAvB;AAMA,aAAO,QAAQ,CAAC,IAAhB;AACD,KARD,CAQE,OAAA,EAAA,EAAM;AACN,YAAM,IAAI,aAAA,CAAA,gBAAJ,CAAqB,sBAArB,EAA6C,aAAA,CAAA,4BAA7C,CAAN;AACD;AACF;;AAED,EAAA,wBAAwB,CAAC,WAAD,EAAiC;AACvD,WAAO,WAAW,CAAC,KAAZ,CAAmB,EAAD,IAA0B;AACjD,UAAI,OAAO,EAAP,KAAc,QAAlB,EAA4B;AAC1B,eAAO,MAAM,CAAC,IAAP,CAAY,EAAZ,EAAgB,KAAhB,CAAuB,MAAD,IAAW;AACtC,cAAI,MAAM,CAAC,MAAP,CAAc,SAAA,CAAA,iBAAd,EAAiC,QAAjC,CAA0C,MAA1C,CAAJ,EAA4E;AAC1E,mBAAO,IAAP;AACD;;AAED,iBAAO,KAAP;AACD,SANM,CAAP;AAOD;;AAED,aAAO,KAAP;AACD,KAZM,CAAP;AAaD;;AAhDS;;AAmDH,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wallet = void 0;\nconst methods_1 = require(\"../communication/methods\");\nconst permissions_1 = require(\"../types/permissions\");\nclass Wallet {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getPermissions() {\n        const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n        return response.data;\n    }\n    async requestPermissions(permissions) {\n        if (!this.isPermissionRequestValid(permissions)) {\n            throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n        try {\n            const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n            return response.data;\n        }\n        catch (_a) {\n            throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n        }\n    }\n    isPermissionRequestValid(permissions) {\n        return permissions.every((pr) => {\n            if (typeof pr === 'object') {\n                return Object.keys(pr).every((method) => {\n                    if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        });\n    }\n}\nexports.Wallet = Wallet;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}